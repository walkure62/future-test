var ReactPreload=function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t){e.exports=React},function(e,t,r){e.exports=r(3)()},,function(e,t,r){"use strict";var o=r(4);function n(){}e.exports=function(){function e(e,t,r,n,s,a){if(a!==o){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return r.checkPropTypes=n,r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";r.r(t);var o=r(0),n=r.n(o),s=r(1),a=r.n(s);const i={},u=[],l=(e,t={})=>(i[e]||(i[e]=new Image,t.crossOrigin&&(i[e].crossOrigin=t.crossOrigin),i[e].src=e,u.push(i[e])),i[e]);var c={add:l,stuff:(e,t)=>{e.length>0&&e.map(e=>l(e,t))},get:(e,t)=>l(e,t),hash:i,cache:u};var d={loadImage(e,t){const r=c.get(e,t);return new Promise((t,o)=>{const n=()=>{t(r)},s=()=>{o(new Error(`failed to preload ${e}`))};if(r.complete)if(r.naturalWidth&&r.naturalHeight)n();else{let e=1;const t=setInterval(()=>{r.naturalWidth&&r.naturalHeight&&(window.clearInterval(t),n()),3===e&&(window.clearInterval(t),s()),e+=1},50)}else r.addEventListener("load",n,!1),r.addEventListener("error",s,!1)})},loadImages(e,t){const r=e.map(e=>(e=>e.then(e=>({v:e,status:"fulfilled"}),e=>({e:e,status:"rejected"})))(this.loadImage(e,t)));return Promise.all(r).then(e=>e.map(e=>{if("fulfilled"!==e.status)throw new Exception("One or more images failed to load");return e}))},stuffImages(e,t){c.stuff(e,t)}};const h={children:a.a.element.isRequired,loadingIndicator:a.a.node,images:a.a.arrayOf(a.a.string),autoResolveDelay:a.a.number,onError:a.a.func,onSuccess:a.a.func,resolveOnError:a.a.bool,mountChildren:a.a.bool};class p extends n.a.Component{constructor(...e){var t;return t=super(...e),this._mounted=!1,this.state={ready:!1},this.loadImages=(()=>{const{images:e,autoResolveDelay:t}=this.props;d.loadImages(e).then(this._handleSuccess,this._handleError),t&&t>0&&(this.autoResolveTimeout=setTimeout(this._handleAutoResolve,t))}),this._handleAutoResolve=(()=>{this._handleSuccess({didAutoResolve:!0})}),this._handleSuccess=(({didError:e,didAutoResolve:t}={})=>{this.autoResolveTimeout&&(clearTimeout(this.autoResolveTimeout),this.autoResolveTimeout=null);const{ready:r}=this.state;if(r||!this._mounted)return;this.setState({ready:!0});const{onSuccess:o}=this.props;o&&o({didError:e,didAutoResolve:t})}),this._handleError=(e=>{if(!this._mounted)return;const{resolveOnError:t,onError:r}=this.props;t&&this._handleSuccess({didError:!0,error:e}),r&&r(e)}),t}componentWillMount(){const{images:e}=this.props;e&&0!==e.length||this._handleSuccess()}componentDidMount(){this._mounted=!0,this.loadImages()}componentDidUpdate(e){const{images:t}=this.props,r=new Set(e.images);let o=!1;for(let e=0;e<t.length;e+=1){const n=t[e];if(!r.has(n)){o=!0;break}}o&&this.loadImages()}componentWillUnmount(){this._mounted=!1,this.autoResolveTimeout&&clearTimeout(this.autoResolveTimeout)}render(){const{ready:e}=this.state,{mountChildren:t,children:r,loadingIndicator:o}=this.props;return e&&t?r:o}}p.propTypes=h,p.defaultProps={loadingIndicator:null,images:[],autoResolveDelay:0,onError:null,onSuccess:null,resolveOnError:!0,mountChildren:!0};var f=p;r.d(t,"Preload",function(){return m}),r.d(t,"ImageCache",function(){return c}),r.d(t,"ImageHelper",function(){return d});const m=f;t.default=m}]);
//# sourceMappingURL=react-preload.js.map